<% layout('layouts/admin') %>

<h2>Edit Product</h2>

<form action="/admin/products/<%= product._id %>?_method=PUT" method="POST" enctype="multipart/form-data" class="admin-form">
    <div class="form-group">
        <label for="name">Product Name *</label>
        <input type="text" id="name" name="name" value="<%= product.name %>" required>
    </div>
    
    <div class="form-group">
        <label for="type">Product Type *</label>
        <select id="type" name="type" required>
            <option value="Chair" <%= product.type === 'Chair' ? 'selected' : '' %>>Chair</option>
            <option value="Table" <%= product.type === 'Table' ? 'selected' : '' %>>Table</option>
            <option value="Bed" <%= product.type === 'Bed' ? 'selected' : '' %>>Bed</option>
            <option value="Cabinet" <%= product.type === 'Cabinet' ? 'selected' : '' %>>Cabinet</option>
            <option value="Sofa" <%= product.type === 'Sofa' ? 'selected' : '' %>>Sofa</option>
            <option value="Shelf" <%= product.type === 'Shelf' ? 'selected' : '' %>>Shelf</option>
            <option value="Other" <%= product.type === 'Other' ? 'selected' : '' %>>Other</option>
        </select>
    </div>
    
    <div class="form-group">
        <label for="price">Price (â‚¦) *</label>
        <input type="number" id="price" name="price" value="<%= product.price %>" min="0" step="0.01" required>
    </div>
    
    <div class="form-group">
        <label for="description">Description *</label>
        <textarea id="description" name="description" rows="5" required><%= product.description %></textarea>
    </div>
    
    <div class="form-group">
        <label for="image">Product Image</label>
        <input type="file" id="image" name="image" accept="image/*">
        <% if (product.image && product.image !== 'no-image.jpg') { %>
            <div class="current-image">
                <p>Current Image:</p>
                <img src="/uploads/<%= product.image %>" alt="<%= product.name %>" class="product-preview">
            </div>
        <% } %>
    </div>
    
    <button type="submit" class="btn btn-primary">Update Product</button>
    <a href="/admin/products" class="btn btn-secondary">Cancel</a>
</form>